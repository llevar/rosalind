from node import Trie
import cProfile

myFilename = "/Users/siakhnin/Downloads/dataset_94_8 (2).txt"


f = open(myFilename, 'r')
inputstr = f.read().strip()

'''
inputstr = """ATATCGTTTTATCGTT"""
inputstr = """GCGGACCGTGTGCCCCACGAAGCCGCTTAACAAGCGTTAGTGTAGTACCTCTTGCTGGGTCGGTACTGGTGTTAGTCGCCAGGGATCTACGTATTGCGGGGTAAACCCCGATGAACACACAATACTCCTGACGATAAGTTGGTATTACACTACGCCAGCTTCGCTATCTGGGTTGATCGACGGGGAAAGTGCTTTTAAATTCTGGTCTAGGGCAAGATTTCAGCCATTCAAATAAACCGGAATCTCCATCATTGTTATTTAATCGTGGCTTGTTCAAGAAATGCCGAAGTAAACTAGTACTTCGTAAATACGACCAGTTTACTCTGACTGTTATAGGGCAGGGACCCTCCTCAATTGCCTCGATGGCGATATAAGTAACCTATGGTGCGGCCCTATTCGTCCGACATCGGGGAAGGGGCTACATCGTTGAGCAGGAGTTCCGCCGCGTGCGAGAACTTACTAGTATACCTAACTGGACCCATGGGGGAGGAGGAAATGGATTGTCCTCGGGGAAGGTCTCTATGGTCCTCAGAAATGCTCATGTGAGCTGTCGGTCTATCCAAACCATGGGTGAGGGCGGCACCTTTAGACTTAAAGGAGATACGTGAGCAGCCCATATTAACGTAACATAGATATATGGTCCCATTGGGCTCGAGTGTGCCAACGTGAAGAAGCCGCCGAATGCCTAACTCTTATCTGTCTTCGGCGCTCTCGGTTATCGCTACTAGCCTGGTAGCTACAGCTCATGTACAAACCCCCTCGCTGATGGCAGGTCGAGGTACGTCAACAGGTACTGGAAGGTTCGTACCTAAGACTTGACTCAAAATAGACCGGTCCAGCCTGTAATACCAGCTTCTAGCAAGCTGAATGAACATAATTCAGCACGAAAGCCCCAGGGACTCATATCCAGTGCTCCTACAAGTGGCATGGTCACTCGTAAGCCGGTTGCATGGCCCTTTGCATCACCTCAAATTCAAATGCCACACCAGCGCTCCATAATGTGTGATTGAGATTCCACCCCCTTCTGGTTGACCACATGAGCCCTATGCCATCACTCTAGGAGAAGCTATGTAAGTTATACTCAGTATTGATCAGCCACCACATAGACGCATCTAGGCAGGGCAAAAGCGATACAGGTACTACTCCGTAAACCCAAGAGGATGCTTATCCAGGTGGGAGACTAATTACAGACCCTCGTGGACTAGATTGTATAGAGCCCACCAGATTATGCAAAACTCCGACTTTCATGCTAGTGACGACTGATGAAGTTCGACGGTGTTCATACCCGAATTGCTGTTCGAAGGCAATACCAGGAACCCCGCGCTTTAACTCGGTATTCCGCGCGAAGTTACAATTTCGACGTTGTTGGGTACTGCATCGTTGTGAAAGCATATGGATACGTACGCGAAATCTAAACTCTCCGGTTACACGACAAGGGCCGTTTATCCGTAAGAAATAGAGAGAAGGTAAAAACTGCAGGTCGTAGTCATGAATACTGAGTATAAAAGGTGGATCTCAGCCGTCTCAAGAGCCACGCGCAAACGGTCTCCATCTTTGTCGTTCGCGAGTGAGGGACTACAGCCGGATATCACTGGGAATGATTTTCTTCCTCGTGGCGAGAGGATTAGGTGGTCTCCGTAGGGGTGGTCGGCTCGTGCCAGTTGAGCTGATCGGCCGCGCACCGACGGATCAAAGCCCTTTGTGAGTGAATAAGCGTATTGTGATCCTTTGCAGTGGGTGAGCGAAGTAAAAATGGTAAATAAGCAAAATAGTAGGTTGTTAAAATGTCAGTCCTGACGGGGCGCGTTAGTTGGGTGTAATCCTAAAGGGCGTAGGAAAACTGCCATGGTAACAGCCTACGCTTAGGGGAGTTGTCATGGCAATCGTTATCGCGGCACACTTGCACCTACAAGTGGGGAGGATGGACTAACACATGAGCGATCATGACTGTAAGCCAGGTGGAGCCCACCACCCACGCAGTTGGCCTACAACCCCCAATAATATCGTATATCTAAACTTTTTACTGCGTCCGGACGCTTATATCTCGTCTCTGCTAACACCACATATAGCGGCCGTCTGCCTGCACGAGGATTCTTACGGCCATCTGCACGCGTCTGGATTGTACCGGACGTCCTTCAATGGTACCTTATTCGCGTGGTGCACCGTCTACGGTCTGCCCTCGAGCGCCAAGATCCATACCGGAGATGCCTGCTGGACTCGACAGCAGGTGGGCGTTTTTGACGATAAATACTCTCTTAGATGATGCTTCACGAGCAAGAATCGCAAAGCGCTTCAGGTCGGTTGGACAAGCTTCATATTCCAAGCTGCTGAAGTTAAGGCTGGCTAAATAACCCTATGATACTTAACTGCACGCAACCTACGTTCCTAAACACTGCGCGATAAGAGTTGCTTTTGGGGTCAACACCTCTACTGCTATTAGTCCATTATCTGGATGGTGTATCGTAATCTGTGTTCCTCCTGCAGGCCTAGCCTAAGACGGCATTGGCCACCGTTGAGCAAAAGATACTGGGTCTCACAACACGCTGACGCATATGCACCATCGTGGCAGGTGTACACGGTCTAATACAGCCTCGCTTGGCACCACTCTTTATCACTCTTGAACAAGGCTAGCTTTGTAGCAAGGTTGTACCCATGGTTTAGCCTCGGACGAGATATGTTAGATATGTGTGAAACTGGACATAAAAAGCCTGGCGGGAACAAATCCTCGCAATGGCTGCACGTGTTAGCATATCCACCGAGTCCGAGGAATTATTCGTTGATCCAGAGGAGGTCCCCCCAGCATATAGGCGAAAACCTGGTGACCTAATTTTCGCGCCACCGGTCTTGGGTACATATTTTGGCAGCCCTCTTCGGGTTCCATACTCGACAAGTGCTATGTACCAGTCTCACTGTGGACTGAGGGTGCTAACTCACGTATACCCTTACCCAGAAGGGTCGTAGAGACACCTCCCTAGGATGGGCAACACCTACAGCCTATTTGGGACCCGTATCTGTGAATGCGCCGACTGATCGGTGGTTTACAAAAAGCGAGCTACACTCACAGGGCCACGGTGGAGAGTTGCGCCGGCTCCAAGGGGGTTATATTAATGCTGGCATGGTGCTCTGACAAAATACCTAATGGCCCGCCGTTGCGCAGCGGTTTTGATTCGGCGAAAGACAACATCTGCCAGCTGCTTCAAGATAACCTGTGACACATATCTATCCGCCCAGAAATACATAGATTCACTAAGGGTCTGCTTTACTTGAGCACTTGTAAACTGAATTGAGGCTTCTTGTTTGGGATGGCCGTTCACCGGGATATGAGCAGATGGAGTTATATAGCCAAATCACGGTGACTCTTAACCCCGGAGAGCGGGGCATATTGGAAACAATCTCTGTTCGGAAAAGCTGACTGATATAGGGACGTAAAATTCCCATTTCTACCATCTTAGTAGTGGACCCCGGAGAACACTCCGGCACGCAACACGCCGTCGAGGTACGTCAACAGGTACTGGAAGGTTCGTACCTAAGACTTGACTCAAAATAGACCGGTCCAGCCTGTAATACCAGCTTCTAGCAAGCTGAATGAACATAATTCAGCACGAAAGCCCCAGGGACTCATATCCAGTGCTCCTACAAGTGGCATGGTCACTCGTAAGCCGGTTGCATGGCCCTTTGCATCACCTCAAATTCAAATGCCACACCAGCGCTCCATAATGTGTGATTGAGATTCCACCCCCTTCTGGTTGACCACATGAGCCCTATGCCATCACTCTAGGAGAAGCTATGTAAGTTATACTCAGTATTGATCAGCCACCACATAGACGCATCTAGGCAGGGCAAAAGCGATACAGGTACTACTCCGTAAACCCAAGAGGATGCTTATCCAGGTGGGAGACTAATTACAGACCCTCGTGGACTAGATTGTATAGAGCCCACCAGATTATGCAAAACTCCGACTTTCATGCTAGTGACGACTGATGAAGTTCGACGGTGTTCATACCCGAATTGCTGTTCGAAGGCAATACCAGGAACCCCGCGCTTTAACTCGGTATTCCGCGCGAAGTTACAATTTCGACGTTGTTGGGTACTGCATCGTTGTGAAAGCATATGGATACGTACGCGAAATCTAAACTCTCCGGTTACACGACAAGGGCCGTTTATCCGTAAGAAATAGAGAGAAGGTGTAAATAAGCAAAATAGTAGGTTGTTAAAATGTCAGTCCTGACGGGGCGCGTTAGTTGGGTGTAATCCTAAAGGGCGTAGGAAAACTGCCATGGTAACAGCCTACGCTTAGGGGAGTTGTCATGGCAATCGTTATCGCGGCACACTTGCACCTACAAGTGGGGAGGATGGACTAACACATGAGCGATCATGACTGTAAGCCAGGTGGAGCCCACCACCCACGCAGTTGGCCTACAACCCCCAATAATATCGTATATCTAAACTTTTTACTGCGTCCGGACGCTTATATCTCGTCTCTGCTAACACCACATATAGCGGCCGTCTGCCTGCACGAGGATTCTTACGGCCATCTGCACGCGTCTGGATTGTACCGGACGTCCTTCAATGGTACCTTATTCGCGTGGTGCACCGTCTACGGTCTGCCCTCGAGCGCCAAGATCCATACCGGAGATGCCTGCTGGACTCGACAGCAGGTGGGCGTTTTTGACGATAAATACTCTCTTAGATGATGCTTCACGAGCAAGAATCGCAAAGCGCTTCAGGTCGGTTGGACAAGCTTCATATTCCAAGCTGCTGAAGTTAAGGCTGGCTAAATAACCCTATGATACTTAACTGCACGCAACCTACGTTCCTAAACACTGCGCGATAAGAGTTGCTTTTGGGGTCAACACCTCTACTGCTATTAGTCCATTATCTGGATGGTGTATCGTAATCTGTGTTCCTCCTGCAGGCCTAGCCTAAGACGGCATTGGCCACCGTTGAGCAAAAGATACTGGGTCTCACAACACGCTGACGCATATGCACCATCGTGGCAGGTGTACACGGTCTAATACAGCCTCGCTTGGCACCACTCTTTATCACTCTTGAACAAGGCTAGCTTTGTAGCAAGGTTGTACCCATGGTTTAGCCTCGGACGAGATATGTTAGATATGTGTGAAACTGGACATAAAAAGCCTGGCGGGAACAAATCCTCGCAATGGCTGCACGTGTTAGCATATCCACCGAGTCCGAGGAATTATTCGTTGATCCAGAGGAGGTCCCCCCAGCATATAGGCGAAAACCTGGTGACCTAATTTTCGCGCCACCGGTCTTGGGTACATATTTTGGCAGCCCTCTTCGGGTTCCATACTCGACAAGTGCTATGTACCAGTCTCACTGTGGACTGAGGGTGCTAACTCACGTATACCCTTACCCAGAAGGGTCGTAGAGACACCTCCCTAGGATGGGCAACACCTACAGCCTATTTGGGACCCGTATCTGTGAATGCGCCGACTGATCGGTGGTTTACAAAAAGCGAGCTACACTCACAGGGCCACGGTGGAGAGTTGCGCCGGCTCCAAGGGGGTTATATTAATGCTGGCATGGTGCTCTGACAAAATACCTAATGGCCCGCCGTTGCGCAGCGGTTTTGATTCGGCGAAAGACAACATCTGCCAGCTGCTTCAAGATAACCTGTGACACATATCTATCCGCCCAGAAATACATAGATTCACTAAGGGTCTGCTTTACTTGAGCACTTGTAAACTGAATTGAGGCTTCTTGTTTGGGATGGCCGTTCACCGGGATATGAGCAGATGGAGTTATATAGCCAAATCACGGTGACTCTTAACCCCGGAGAGCGGGGCATATTGGAAACAATCTCTGTTCGGAAAAGCTGACTGATATAGGGACGTAAAATTCCCATTTCTACCATCTTAGTAGTGGACCCCGGAGAACACTCCGGCACGCAACACGCCGTCGAGGTACGTCAACAGGTACTGGAAGGTTCGTACCTAAGACTTGACTCAAAATAGACCGGTCCAGCCTGTAATACCAGCTTCTAGCAAGCTGAATGAACATAATTCAGCACGAAAGCCCCAGGGACTCATATCCAGTGCTCCTACAAGTGGCATGGTCACTCGTAAGCCGGTTGCATGGCCCTTTGCATCACCTCAAATTCAAATGCCACACCAGCGCTCCATAATGTGTGATTGAGATTCCACCCCCTTCTGGTTGACCACATGAGCCCTATGCCATCACTCTAGGAGAAGCTATGTAAGTTATACTCAGTATTGATCAGCCACCACATAGACGCATCTAGGCAGGGCAAAAGCGATACAGGTACTACTCCGTAAACCCAAGAGGATGCTTATCCAGGTGGGAGACTAATTACAGACCCTCGTGGACTAGATTGTATAGAGCCCACCAGATTATGCAAAACTCCGACTTTCATGCTAGTGACGACTGATGAAGTTCGACGGTGTTCATACCCGAATTGCTGTTCGAAGGCAATACCAGGAACCCCGCGCTTTAACTCGGTATTCCGCGCGAAGTTACAATTTCGACGTTGTTGGGTACTGCATCGTTGTGAAAGCATATGGATACGTACGCGAAATCTAAACTCTCCGGTTACACGACAAGGGCCGTTTATCCGTAAGAAATAGAGAGAAGGT"""
'''
print len(inputstr)
my_trie = Trie('')

def addChild(self, new_child):
        if self.children == None:
            self.children = {}
        
        self.children[new_child.value] = new_child
        
Trie.addChild = addChild

def initFromStringsWithLongestSubstringCount(self, string_list):
        max_sub_len = 0
        max_sub = ""
        
        for my_string in string_list:
            cur_node = self
            cur_sub_len = 0
            
            if max_sub_len >= len(my_string):
                    break
                
            for c in my_string:
                my_match = cur_node.getChild(c)
                if not my_match:
                    new_child = Trie(c)
                    cur_node.addChild(new_child)
                    cur_node = new_child
                else:
                    cur_node = my_match
                    cur_sub_len += 1
                    
                if cur_sub_len > max_sub_len:
                    max_sub_len = cur_sub_len
                    max_sub = my_string[:max_sub_len]             
                     
        print max_sub
        
Trie.initFromStringsWithLongestSubstringCount = initFromStringsWithLongestSubstringCount

def doIt():
    my_trie.initFromStringsWithLongestSubstringCount(inputstr[len(inputstr) - i - 1:] for i in range(len(inputstr)))

cProfile.run('doIt()')    